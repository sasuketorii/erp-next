# 【Frappe/ERPNext】推奨されるホワイトラベル化・カスタム・拡張方法 🎨

Frappe/ERPNextでホワイトラベル化や機能拡張を行う際の公式推奨方法は、**コア（FrappeやERPNextの本体）のコードを直接編集せず、「カスタムアプリ」を作成して対応する**ことです。

このアプローチにより、システムの保守性と拡張性を両立させながら、安全にカスタマイズを行うことができます。

---

## なぜカスタムアプリなのか？

* **🛡️ アップデートの安全性**: コアを直接変更すると、`bench update`コマンドでアップデートを実行した際に、自分たちの変更が上書きされてしまいます。カスタムアプリとして分離されていれば、本体のアップデートを安全に適用できます。
* **📂 管理のしやすさ**: カスタマイズ内容が自分たちのアプリ内にまとまっているため、バージョン管理が容易になり、どのような変更を加えたかが一目瞭然になります。
* **🔄 再利用と配布**: 作成したカスタムアプリは、他のプロジェクト（サイト）にも簡単にインストールして再利用できます。

---

## 具体的なカスタム・拡張手法

カスタムアプリを作成（`bench new-app [アプリ名]`）し、そのアプリ内で以下の手法を組み合わせてカスタマイズを行います。

| 目的 | 手法 | カスタムアプリでの実装方法 |
| :--- | :--- | :--- |
| **ロゴ・名称の変更** (ホワイトラベル) | **Hooks** | アプリ内の`hooks.py`ファイルで、`app_logo_url`や`app_title`などを設定し、ERPNextのデフォルト値を上書きします。 |
| **画面の項目の振る舞いを変更** (UI/UX) | **カスタムスクリプト** | 特定の画面（フォーム）で、JavaScriptを使い項目を非表示にしたり、ボタンを追加したり、入力値をリアルタイムで検証したりします。 |
| **帳票デザインの変更** (請求書など) | **プリントフォーマット** | HTMLとJinjaテンプレートを使い、自社ロゴや独自のレイアウトを持つ請求書や納品書を自由に作成できます。 |
| **新しい機能・画面の追加** | **カスタムDocType** | 「プロジェクト管理」や「設備台帳」など、標準にない新しい機能（データモデル）を`DocType`としてGUIで簡単に作成できます。 |
| **既存機能のバックエンド動作を変更** | **Hooksでのメソッド上書き** | `hooks.py`で指定することで、Frappe/ERPNextの特定のPythonメソッドを、自作のメソッドで上書き（オーバーライド）し、コアのロジックを変更できます。 |
| **特定の処理の自動化** | **サーバスクリプト** | 「保存前」「提出後」といった特定のイベントをトリガーに、Pythonコードを実行し、値の自動計算や他システムとの連携など、複雑なバックエンド処理を実装します。 |

---

### 📝 まとめ：推奨される開発フロー

1.  `bench new-app [あなたのアプリ名]` コマンドで**カスタムアプリの雛形を作成**します。
2.  上記の表にある手法を使い、**カスタムアプリ内に変更内容を実装**していきます。
3.  `bench --site [サイト名] install-app [あなたのアプリ名]` で、**サイトにカスタムアプリをインストール**して変更を適用します。

この流れに従うことで、Frappe/ERPNextの強力な標準機能を活かしつつ、独自の要件に合わせたシステムを効率的かつ安全に構築できます。
