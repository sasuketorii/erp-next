# ã€ERPNextã€‘æ—¥æœ¬ã®ã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦ï¼ˆé©æ ¼è«‹æ±‚æ›¸ï¼‰å¯¾å¿œ è¦ä»¶å®šç¾©æ›¸ ğŸ‡¯ğŸ‡µ

ERPNextã‚’æ—¥æœ¬ã®ã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦ï¼ˆé©æ ¼è«‹æ±‚æ›¸ç­‰ä¿å­˜æ–¹å¼ï¼‰ã«å¯¾å¿œã•ã›ã‚‹ãŸã‚ã®ã€ã‚·ã‚¹ãƒ†ãƒ æ”¹ä¿®ãŠã‚ˆã³è¨­å®šã«é–¢ã™ã‚‹è¦ä»¶å®šç¾©ã§ã™ã€‚

---

## 1. ç›®çš„

æ¨™æº–ã®ã€Œè²©å£²è«‹æ±‚æ›¸ï¼ˆSales Invoiceï¼‰ã€ã‹ã‚‰ã€å›½ç¨åºã®è¦ä»¶ã‚’æº€ãŸã—ãŸã€Œé©æ ¼è«‹æ±‚æ›¸ã€ã‚’ç™ºè¡Œå¯èƒ½ã«ã™ã‚‹ã“ã¨ã€‚

---

## 2. è¦ä»¶ä¸€è¦§

é©æ ¼è«‹æ±‚æ›¸ã«è¨˜è¼‰ãŒç¾©å‹™ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ä»¥ä¸‹ã®é …ç›®ã‚’ã€ERPNextä¸Šã§è¨­å®šãƒ»å‡ºåŠ›å¯èƒ½ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

| No. | å¿…é ˆè¨˜è¼‰é …ç›® | ERPNextã§ã®å¯¾å¿œæ–¹é‡ |
| :-- | :--- | :--- |
| 1 | **ç™ºè¡Œäº‹æ¥­è€…ã®æ°åã¾ãŸã¯åç§°** | æ¨™æº–ã®ã€Œä¼šç¤¾ï¼ˆCompanyï¼‰ã€æƒ…å ±ã‹ã‚‰è‡ªå‹•ã§å¼•ç”¨ã€‚ |
| 2 | **é©æ ¼è«‹æ±‚æ›¸ç™ºè¡Œäº‹æ¥­è€…ã®ç™»éŒ²ç•ªå·** | ã€Œä¼šç¤¾ï¼ˆCompanyï¼‰ã€DocTypeã«**ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€Œç™»éŒ²ç•ªå·ã€ã‚’è¿½åŠ **ã€‚ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ä¼šç¤¾æƒ…å ±ã‹ã‚‰å¼•ç”¨ã™ã‚‹ã€‚ |
| 3 | **å–å¼•å¹´æœˆæ—¥** | æ¨™æº–ã®ã€Œè»¢è¨˜æ—¥ä»˜ï¼ˆPosting Dateï¼‰ã€ã‚’åˆ©ç”¨ã€‚ |
| 4 | **å–å¼•å†…å®¹ï¼ˆè»½æ¸›ç¨ç‡ã®å¯¾è±¡å“ç›®ã§ã‚ã‚‹æ—¨ï¼‰** | ã€Œè²©å£²è«‹æ±‚æ›¸æ˜ç´°ï¼ˆSales Invoice Itemï¼‰ã€ã®ã€Œå“ç›®åï¼ˆItem Nameï¼‰ã€ã¨ã€Œèª¬æ˜ï¼ˆDescriptionï¼‰ã€ã‚’åˆ©ç”¨ã€‚ã€Œâ€»ã€ãªã©ã®è¨˜å·ã§è»½æ¸›ç¨ç‡å¯¾è±¡å“ç›®ã¨åˆ†ã‹ã‚‹ã‚ˆã†ã«è¡¨ç¤ºã€‚ |
| 5 | **ç¨ç‡ã”ã¨ã«åŒºåˆ†ã—ã¦åˆè¨ˆã—ãŸå¯¾ä¾¡ã®é¡ï¼ˆç¨æŠœã¾ãŸã¯ç¨è¾¼ï¼‰** | ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¿…é ˆã€‚ã€Œç¨ã®å†…è¨³ï¼ˆSales Taxes and Chargesï¼‰ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åŸºã«ã€**8%å¯¾è±¡ã®åˆè¨ˆé‡‘é¡ã¨10%å¯¾è±¡ã®åˆè¨ˆé‡‘é¡ã‚’ãã‚Œãã‚Œç®—å‡ºã—ã¦è¡¨ç¤º**ã™ã‚‹ã€‚ |
| 6 | **é©ç”¨ç¨ç‡** | ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã¦ã€ç¨ç‡ã”ã¨ã®åˆè¨ˆé¡ã®è¿‘ãã«ã€Œ8%ã€ã€Œ10%ã€ã¨æ˜è¨˜ã™ã‚‹ã€‚ |
| 7 | **ç¨ç‡ã”ã¨ã«åŒºåˆ†ã—ãŸæ¶ˆè²»ç¨é¡ç­‰** | ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¿…é ˆã€‚ã€Œç¨ã®å†…è¨³ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åŸºã«ã€**8%å¯¾è±¡ã®æ¶ˆè²»ç¨é¡ã¨10%å¯¾è±¡ã®æ¶ˆè²»ç¨é¡ã‚’ãã‚Œãã‚Œç®—å‡ºã—ã¦è¡¨ç¤º**ã™ã‚‹ã€‚ |
| 8 | **æ›¸é¡ã®äº¤ä»˜ã‚’å—ã‘ã‚‹äº‹æ¥­è€…ã®æ°åã¾ãŸã¯åç§°** | æ¨™æº–ã®ã€Œé¡§å®¢ï¼ˆCustomerï¼‰ã€æƒ…å ±ã‚’åˆ©ç”¨ã€‚ |

---

## 3. å®Ÿè£…ã‚¿ã‚¹ã‚¯

### 3.1. DocTypeã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

1.  **ã€Œä¼šç¤¾ï¼ˆCompanyï¼‰ã€DocTypeã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**
    * `è¨­å®š > ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º > DocTypeã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º`ã«ç§»å‹•ã€‚
    * ã€Œä¼šç¤¾ã€ã‚’é¸æŠã€‚
    * ä»¥ä¸‹ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚
        * **ãƒ©ãƒ™ãƒ«**: `é©æ ¼è«‹æ±‚æ›¸ç™ºè¡Œäº‹æ¥­è€…ç™»éŒ²ç•ªå·`
        * **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å**: `custom_invoice_registration_number` ï¼ˆä»»æ„ï¼‰
        * **ãƒ‡ãƒ¼ã‚¿å‹**: `ãƒ‡ãƒ¼ã‚¿`
    * è‡ªç¤¾ã®ä¼šç¤¾æƒ…å ±ã«ç™»éŒ²ç•ªå·ï¼ˆT+13æ¡ã®æ•°å­—ï¼‰ã‚’å…¥åŠ›ã™ã‚‹ã€‚

### 3.2. ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä½œæˆ

1.  **æ–°è¦ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä½œæˆ**
    * `è¨­å®š > å°åˆ· > ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ`ã«ç§»å‹•ã€‚
    * ã€Œæ–°è¦ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€æ–°ã—ã„ãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã€‚
    * **DocType**: `è²©å£²è«‹æ±‚æ›¸`
    * **Standard**: `No`
    * **Module**: ï¼ˆè‡ªç¤¾ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ—ãƒªã‚’é¸æŠï¼‰
    * **Print Format Type**: `Jinja`

2.  **HTML / Jinjaãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç·¨é›†**
    ä½œæˆã—ãŸãƒ—ãƒªãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®HTMLã‚’ç·¨é›†ã—ã€ä»¥ä¸‹ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹ã€‚

    * **ç™»éŒ²ç•ªå·ã®è¡¨ç¤º**:
        ```html
        {{ doc.company_address_html }}
        <p>ç™»éŒ²ç•ªå·: {{ frappe.db.get_value("Company", doc.company, "custom_invoice_registration_number") }}</p>
        ```

    * **ç¨ç‡ã”ã¨ã®åˆè¨ˆé¡ã¨æ¶ˆè²»ç¨é¡ã®è¡¨ç¤º**:
        Jinjaã®ãƒ«ãƒ¼ãƒ—ã¨æ¡ä»¶åˆ†å²ã‚’ä½¿ã„ã€ã€Œç¨ã®å†…è¨³ï¼ˆ`doc.taxes`ï¼‰ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‡¦ç†ã™ã‚‹ã€‚
        ```jinja
        {# ç¨ç‡ã”ã¨ã®åˆè¨ˆã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®è¾æ›¸ã‚’åˆæœŸåŒ– #}
        {% set totals_by_rate = {} %}
        {% for tax in doc.taxes %}
            {% if tax.rate in [8, 10] %}
                {# åŒã˜ç¨ç‡ã®åˆè¨ˆé¡ã‚’åŠ ç®— #}
                {% set _ = totals_by_rate.update({
                    tax.rate: {
                        'taxable_amount': (totals_by_rate.get(tax.rate, {}).get('taxable_amount', 0) + tax.tax_amount_after_discount_amount),
                        'tax_amount': (totals_by_rate.get(tax.rate, {}).get('tax_amount', 0) + tax.tax_amount)
                    }
                }) %}
            {% endif %}
        {% endfor %}

        {# è¨ˆç®—çµæœã®è¡¨ç¤º #}
        {% for rate, data in totals_by_rate.items() %}
        <p>
            {{ rate }}%å¯¾è±¡åˆè¨ˆ: {{ frappe.utils.fmt_money(data.taxable_amount, currency=doc.currency) }} <br>
            (å†…æ¶ˆè²»ç¨é¡: {{ frappe.utils.fmt_money(data.tax_amount, currency=doc.currency) }})
        </p>
        {% endfor %}
        ```
        *æ³¨æ„: ä¸Šè¨˜ã¯ãƒ­ã‚¸ãƒƒã‚¯ã®æ¦‚å¿µã‚’ç¤ºã™ã‚‚ã®ã§ã‚ã‚Šã€å®Ÿéš›ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«åˆã‚ã›ã¦èª¿æ•´ãŒå¿…è¦ã§ã™ã€‚*

---

## 4. ãƒ†ã‚¹ãƒˆé …ç›®

* [ ] ç™»éŒ²ç•ªå·ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã€‚
* [ ] 8%ã¨10%ã®å•†å“ãŒæ··åœ¨ã™ã‚‹è«‹æ±‚æ›¸ã§ã€ãã‚Œãã‚Œã®åˆè¨ˆé¡ãƒ»æ¶ˆè²»ç¨é¡ãŒæ­£ã—ãåŒºåˆ†ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã€‚
* [ ] 8%ã®ã¿ã€10%ã®ã¿ã®è«‹æ±‚æ›¸ã§ã‚‚è¡¨ç¤ºãŒå´©ã‚Œãªã„ã“ã¨ã€‚
* [ ] å…¨ã¦ã®å¿…é ˆè¨˜è¼‰é …ç›®ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚
* [ ] 